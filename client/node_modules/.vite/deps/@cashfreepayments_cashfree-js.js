import "./chunk-P2LSHJDD.js";

// node_modules/@cashfreepayments/cashfree-js/dist/script.esm.js
var V3_URL = "https://sdk.cashfree.com/js/v3/cashfree.js";
var V3_URL_REGEX = /^https:\/\/sdk\.cashfree\.com\/js\/v3\/?(\?.*)?$/;
var EXISTING_SCRIPT_MESSAGE = "load was called but an existing Cashfree.js script already exists in the document; existing script parameters will be used";
var findScript = function findScript2() {
  var scripts = document.querySelectorAll('script[src^="'.concat(V3_URL, '"]'));
  for (var i = 0; i < scripts.length; i++) {
    var script = scripts[i];
    if (!V3_URL_REGEX.test(script.src)) {
      continue;
    }
    return script;
  }
  return null;
};
var injectScript = function injectScript2(params) {
  var queryString = "";
  var script = document.createElement("script");
  script.src = "".concat(V3_URL).concat(queryString);
  var headOrBody = document.head || document.body;
  if (!headOrBody) {
    throw new Error("Expected document.body not to be null. Cashfree.js requires a <body> element.");
  }
  headOrBody.appendChild(script);
  return script;
};
var cashfreePromise = null;
var loadScript = function loadScript2(params) {
  if (cashfreePromise !== null) {
    return cashfreePromise;
  }
  cashfreePromise = new Promise(function(resolve, reject) {
    if (typeof window === "undefined" || typeof document === "undefined") {
      resolve(null);
      return;
    }
    if (window.Cashfree && params) {
      console.warn(EXISTING_SCRIPT_MESSAGE);
    }
    if (window.Cashfree) {
      resolve(window.Cashfree);
      return;
    }
    try {
      var script = findScript();
      if (script && params) {
        console.warn(EXISTING_SCRIPT_MESSAGE);
      } else if (!script) {
        script = injectScript(params);
      }
      script.addEventListener("load", function() {
        if (window.Cashfree) {
          resolve(window.Cashfree);
        } else {
          reject(new Error("Cashfree.js not available"));
        }
      });
      script.addEventListener("error", function() {
        reject(new Error("Failed to load Cashfree.js"));
      });
    } catch (error) {
      reject(error);
      return;
    }
  });
  return cashfreePromise;
};
var initCashfree = function initCashfree2(maybeCashfree, args, startTime) {
  if (maybeCashfree === null) {
    return null;
  }
  var cashfree = maybeCashfree.apply(void 0, args);
  return cashfree;
};
var cashfreePromise$1 = Promise.resolve().then(function() {
  return loadScript(null);
});
var loadCalled = false;
cashfreePromise$1["catch"](function(err) {
  if (!loadCalled) {
    console.warn(err);
  }
});
var load = async function load2() {
  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }
  loadCalled = true;
  var startTime = Date.now();
  const maybeCashfree = await cashfreePromise$1;
  return initCashfree(maybeCashfree, args, startTime);
};
export {
  load
};
//# sourceMappingURL=@cashfreepayments_cashfree-js.js.map
